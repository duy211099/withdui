---
title: 3. Lợi ích của việc tách biệt core code và infrastructure code
slug: loi-ich-cua-viec-tach-biet-core-code-va-infrastructure-code
date: '2025-12-19'
excerpt: ''
category: Web Architecture
tags: ["KIẾN TRÚC ỨNG DỤNG WEB - Nguyễn Thế Huy", "1-Core Code & Infrastructure Code"]
author: huynt.dev
published: true
featured_image: ''
---

- Hỗ trợ phát triển hướng nghiệp vụ - hướng miền (DDD):  Khi phần code lõi được tác riêng, chúng ta có thể tập trung mô hình hóa domain (miền nghiệp vụ) một cách rõ ràng, nhất quán. Điều này rất phù hợp với triết lý DDD. Toàn bộ logic quan trọng được gói gọn trong domain model (các entity, value object,...), cho phép nhóm phát triển và chuyên gia nghiệp vụ (domain experts) cùng hiểu rõ và tiến hóa mô hình domain mà không bị vướng bởi chi tiết kỹ thuật. Việc tách biệt hà tầng khỏi logic lõi giúp mô hình domain có thế phát triển một cách 'domain-driven' thực thụ
- Dễ dàng phát triển theo hướng kiểm thử (TDD): Code lõi tách biệt hạ tầng sẽ dễ kiểm thử hơn rất nhiều, dẫn đến khả năng áp dụng Test-Driven Development hiệu quả. Bạn có thể viết các unit test nhanh cho phần logic domain (do không phụ thuộc DB, network,...), đồng thời các test này ổn định và chạy rất nhanh so với test tích hợp liên quan đến framework hoặc cơ sở dữ liệu nặng nề. Khi việc viết test trở nên thuận tiện, đội ngũ sẽ tự tin hơn khi refactor code và thêm tính năng, vì đã có test cover.
- Minh bạch và dễ hiểu hơn: Như đã đề cập, tách biệt sẽ làm code trong phần core trở nên 'sạch' và tập trung vào cái gì làm thay vì làm như thế nào. Các bước nghiệp vụ cấp cao được thể hiện rõ ràng bằng tên phương thức hướng vào nghiệp vụ (VD: orderRepository -> saveOrder thể hiện ý nghĩa 'lưu đơn hàng' thay vì một loạt lệnh insert SQL). Nhờ đó, người đọc code hay bảo trì có thể năm bắt nhanh dòng chảy nghiệp vụ, tài liệu hóa được yêu cầu phần mềm ngay trong mã nguồn. Code rõ ràng cũng đồng nghĩa với ít bug hơn do lập trình viên ít hiểu lầm yêu cầu hơn.
- Tăng khả năng tái sử dụng và linh hoạt mở rộng: Khi phần core không 'dính' cụ thể vào một framework hay CSDL nào, chúng ta có thể thay thế hoặc nâng cấp hạ tầng mà không ảnh hưởng đến logic chính. Ví dụ, nếu cần chuyển từ MySQL sang PostgreSQL, hay thậm chí sang một dịch vụ lưu trữ cloud khác, phần lớn core code không cần thay đổi, chỉ cần cung cấp implementation hạ tầng mới tương ứng. Tương tự, nếu muốn thêm interface API bên cạnh giao diện web, ta có thể tái sử dụng các dịch vụ và logic domain y nguyên, chỉ viết thêm lớp adapter cho giao diện mới. Trên thực tế, nếu ứng dụng có vòng đời dài hơn 2 năm thì việc decouple khỏi hạ tầng là điều rất đáng để áp dụng vì sớm muộn các công nghệ xoay quanh (framework, database, dịch vụ ngoài) sẽ thay đổi với tốc độ khác so với domain. Nhờ decoupling, code lõi quá giá của bạn sẽ ít bị ảnh hưởng bởi những biến động công nghệ đó - mỗi bên có thể phát triển theo tốc độ riêng.
- Dễ bảo trì, nâng cấp Framework: Vì core code không phụ thuộc trực tiếp vào framework, nên khi cần nâng cấp phiên bản framework hoặc thay thế thư viện, phạm vi ảnh hưởng sẽ được khoanh vùng ở tầng infrastructure. Chẳng hạn, nâng cấp Laravel lên bảng major mới sẽ ít "đau đớn" hơn nếu phần lớn logic nghiệp vụ của bạn không viết dính chặt vào các chức năng đặc thù của phiên bản cũ. Tương tự, thay driver kết nối DB, đổi dịch vụ thanh toán... sẽ ' ít tốn kém' hơn nhiều so với trường hợp core code và hạ tầng đang trộn lẫn. Tóm lại, tính ổn định và khả năng bảo trì của ứng dụng được tăng cường. Nếu một thay đổi bên ngoài xảy ra, bạn sẽ biết ngay cần sửa ở đâu - thường là trong các lớp adapter hạ tầng - thay vì dò tìm khắp các code base.
- Chuẩn hóa kiến trúc và thuận lợi cho teamwork: Khi áp dụng triệt để phân tách, cấu trúc dự án thường hình thành các layer chuẩn: Layer Domain (chứa core code), Layer Application (chứa dịch vụ ứng dụng, use case), Layer Infrastructure (chứa code truy xuất dữ liệu, tích hợp hệ thống ngoài). Kiến trúc nhiều lớp kết hợp với mô hình Ports và Adapters (Hexagonal Architecture) có thể được thiết lập một cách đơn giản và dễ dàng sau khi ta decouple code thành core và infrastructure. Điều này tạo ra ngôn ngữ chung và các quy tắc rõ ràng cho team khi thêm tính năng: ai cũng biết nên đặt code ở layer nào, phụ thuộc một chiều ra sao. Kết quả là việc onboard người mới dễ dàng hơn, code nhất quán và team phối hợp hiệu quả hơn.

> Tất cả những lợi ích trên góp phần tạo nên một mã nguồn sạch và kiến trúc bền vững. Thậm chí, dù dứ án của bạn ban đầu có nhỏ, việc phân tách ngay từ đầu sẽ kéo dài tuổi thọ của ứng dụng lâu nhất có thể. Mọi phần mềm rồi cũng có độ phức tạo tăng dần và có nguy cơ trở nên hỗn độn, nhưng nếu bạn áp dụng những nguyên tắc tách biệt core/infrastructure, 'độ rối' sẽ tăng chậm hơn đáng kể, cho phép bạn kéo dài tuổi thọ dự án và thích ứng với yêu cầu mới nhanh hơn.